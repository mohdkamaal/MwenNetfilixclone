{"ast":null,"code":"var _jsxFileName = \"/home/akhilesh/Desktop/Mern/MwenNetfilixclone/admin1/src/pages/newlist/newlist.jsx\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState } from \"react\";\nimport { CreateMovie } from \"../../context/Moviecontext/apiCalls\";\nimport { MoviesContext } from \"../../context/Moviecontext/MoviesContext\";\nimport storage from \"../../firebase/firebase\";\nimport \"./newlist.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Newlist() {\n  _s();\n\n  const {\n    dispatch\n  } = useContext(MoviesContext);\n  const [movie, setMovie] = useState(null);\n  const [img, setImg] = useState(null);\n  const [imgTitle, setImgTitle] = useState(null);\n  const [imgSm, setImgSm] = useState(null);\n  const [trailer, setTrailer] = useState(null);\n  const [video, setVideo] = useState(null);\n  const [uploaded, setUploaded] = useState(1);\n\n  const handleChange = e => {\n    const value = e.target.value;\n    setMovie({ ...movie,\n      [e.target.name]: value\n    });\n  };\n\n  console.log(movie);\n\n  const handleSelect = e => {};\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    CreateMovie(dispatch, movie);\n  };\n\n  const Upload = items => {\n    items.forEach(item => {\n      const filename = new Date().getTime() + item.label + item.file.name;\n      const uploadTask = storage.ref(`/items/${filename}`).put(item.file);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log(\"uploading is \" + progress + \"% done\");\n      }, err => console.log(err), () => {\n        uploadTask.snapshot.ref.getDownloadURL().then(url => {\n          console.log(url);\n          setMovie(pre => {\n            return { ...pre,\n              [item.label]: url\n            };\n          });\n          setUploaded(pre => pre + 1);\n        });\n      });\n    });\n  };\n\n  const handleUpload = e => {\n    e.preventDefault();\n    Upload([{\n      file: img,\n      label: \"image\"\n    }, {\n      file: imgTitle,\n      label: \"imageTitle\"\n    }, {\n      file: trailer,\n      label: \"trailer\"\n    }, {\n      file: video,\n      label: \"video\"\n    }]);\n  };\n\n  console.log(movie);\n  console.log(uploaded);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"newProduct\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"addProductTitle\",\n      children: \"New list\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"addProductForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"John Wick\",\n          name: \"title\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Genre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Genre\",\n          name: \"genre\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Genre\",\n          name: \"genre\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), uploaded >= 5 ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"addProductButton\",\n        onClick: handleSubmit,\n        children: \"Create\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"addProductButton\",\n        onClick: handleUpload,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 6\n  }, this);\n}\n\n_s(Newlist, \"eWKKTUYBf+4iF8F0MIiKin+Hk2M=\");\n\n_c = Newlist;\n\nvar _c;\n\n$RefreshReg$(_c, \"Newlist\");","map":{"version":3,"sources":["/home/akhilesh/Desktop/Mern/MwenNetfilixclone/admin1/src/pages/newlist/newlist.jsx"],"names":["useContext","useState","CreateMovie","MoviesContext","storage","Newlist","dispatch","movie","setMovie","img","setImg","imgTitle","setImgTitle","imgSm","setImgSm","trailer","setTrailer","video","setVideo","uploaded","setUploaded","handleChange","e","value","target","name","console","log","handleSelect","handleSubmit","preventDefault","Upload","items","forEach","item","filename","Date","getTime","label","file","uploadTask","ref","put","on","snapshot","progress","bytesTransferred","totalBytes","err","getDownloadURL","then","url","pre","handleUpload"],"mappings":"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","sourcesContent":["\nimport { useContext, useState } from \"react\";\nimport { CreateMovie } from \"../../context/Moviecontext/apiCalls\";\nimport { MoviesContext } from \"../../context/Moviecontext/MoviesContext\";\nimport storage from \"../../firebase/firebase\";\nimport \"./newlist.css\";\nexport default function Newlist() {\n  const { dispatch} = useContext(MoviesContext)\n  const [movie, setMovie] = useState(null);\n  const [img, setImg] = useState(null);\n  const [imgTitle, setImgTitle] = useState(null);\n  const [imgSm, setImgSm] = useState(null);\n  const [trailer, setTrailer] = useState(null);\n  const [video, setVideo] = useState(null);\n  const [uploaded, setUploaded] = useState(1);\n  const handleChange = (e) => {\n    const value = e.target.value;\n    setMovie({ ...movie, [e.target.name]: value });\n  };\n\n  console.log(movie)\n  const handleSelect = (e) => {\n  \n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    CreateMovie(dispatch,movie)\n  };\n\n  const Upload = (items) => {\n    \n    items.forEach(item => {\n      const filename =  new Date().getTime()+item.label+item.file.name\n      const uploadTask = storage.ref(`/items/${filename}`).put(item.file)\n      uploadTask.on(\"state_changed\", (snapshot) => {\n        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        console.log(\"uploading is \"+progress+\"% done\")\n      }\n        , (err) => console.log(err), () => {\n          uploadTask.snapshot.ref.getDownloadURL().then((url)=> {\n            console.log(url)\n            setMovie((pre) => {\n            return {...pre,[item.label]:url}\n            })\n            setUploaded((pre)=>pre+1)\n        })\n      }\n      \n      )\n    })\n  }\n\n\n  const handleUpload = (e) => {\n    e.preventDefault();\n\n    Upload([\n      {\n        file:img,label:\"image\"\n      },\n      {\n        file:imgTitle,label:\"imageTitle\"\n      },\n      {\n        file:trailer,label:\"trailer\"\n      },\n      {\n        file:video,label:\"video\"\n      },\n    ])\n\n  }\n  console.log(movie)\n  console.log(uploaded)\n  return (\n     <div className=\"newProduct\">\n      <h1 className=\"addProductTitle\">New list</h1>\n      <form className=\"addProductForm\">\n       \n        \n       \n        <div className=\"addProductItem\">\n          <label>Title</label>\n          <input\n            type=\"text\"\n            placeholder=\"John Wick\"\n            name=\"title\"\n            onChange={handleChange}\n          />\n        </div>\n    \n       \n        <div className=\"addProductItem\">\n          <label>Genre</label>\n          <input\n            type=\"text\"\n            placeholder=\"Genre\"\n            name=\"genre\"\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"addProductItem\">\n          <label>type</label>\n          <input\n            type=\"text\"\n            placeholder=\"Genre\"\n            name=\"genre\"\n            onChange={handleChange}\n          />\n        </div>\n       \n       \n       \n       \n        {uploaded >=5 ? (\n          <button className=\"addProductButton\" onClick={handleSubmit}>\n            Create\n          </button>\n        ) : (\n          <button className=\"addProductButton\" onClick={handleUpload}>\n            Upload\n          </button>\n        )}\n      </form>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}