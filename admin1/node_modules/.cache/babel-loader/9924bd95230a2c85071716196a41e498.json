{"ast":null,"code":"var _jsxFileName = \"/home/akhilesh/Desktop/Mern/MwenNetfilixclone/admin/src/pages/product/Product.jsx\",\n    _s = $RefreshSig$();\n\nimport { Link, useLocation } from \"react-router-dom\";\nimport \"./product.css\";\nimport Chart from \"../../components/chart/Chart\";\nimport { productData } from \"../../dummyData\";\nimport { Publish } from \"@material-ui/icons\";\nimport MoivesReducer from \"../../context/Moviecontext/MoviesReducer\";\nimport { useContext, useState } from \"react\";\nimport storage from \"../../firebase/firebase\";\nimport { MoviesContext } from \"../../context/Moviecontext/MoviesContext\";\nimport { updateMovie } from \"../../context/Moviecontext/apiCalls\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Product() {\n  _s();\n\n  const location = useLocation();\n  const {\n    dispatch\n  } = useContext(MoviesContext);\n  const [movies, setMovie] = useState(null);\n  const [uploaded, setUploaded] = useState(1);\n  const [trailer, setTrailer] = useState(null);\n  const [img, setimg] = useState(null);\n  const [video, setVideo] = useState(null);\n  const movie = location.movie;\n\n  const handleChange = e => {\n    const value = e.target.value;\n    setMovie({ ...movies,\n      [e.target.name]: value\n    });\n  };\n\n  console.log(movies);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    updateMovie(dispatch, movies, movie._id);\n  };\n\n  const Upload = items => {\n    items.forEach(item => {\n      const filename = new Date().getTime() + (item === null || item === void 0 ? void 0 : item.label) + (item === null || item === void 0 ? void 0 : item.file.name);\n      const uploadTask = storage.ref(`/items/${filename}`).put(item === null || item === void 0 ? void 0 : item.file);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log(\"uploading is \" + progress + \"% done\");\n      }, err => console.log(err), () => {\n        uploadTask.snapshot.ref.getDownloadURL().then(url => {\n          console.log(url);\n          setMovie(pre => {\n            return { ...pre,\n              [item.label]: url\n            };\n          });\n          setUploaded(pre => pre + 1);\n        });\n      });\n    });\n  };\n\n  const handleUpload = e => {\n    e.preventDefault();\n    Upload([{\n      file: trailer,\n      label: \"trailer\"\n    }, {\n      file: video,\n      label: \"video\"\n    }, {\n      file: image,\n      label: \"image\"\n    }]);\n  };\n\n  console.log(video);\n  console.log(trailer);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"productTitleContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"productTitle\",\n        children: \"Movie\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/newproduct\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"productAddButton\",\n          children: \"Create\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"productTop\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productTopRight\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"productInfoTop\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: movie.image,\n            className: \"productInfoImg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"productName\",\n            children: movie.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"productInfoBottom\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"productInfoItem\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoKey\",\n              children: \"id:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoValue\",\n              children: movie._id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"productInfoItem\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoKey\",\n              children: \"Genre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoValue\",\n              children: movie.genre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"productInfoItem\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoKey\",\n              children: \"Year\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoValue\",\n              children: movie.year\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"productInfoItem\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoKey\",\n              children: \"limit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoValue\",\n              children: movie.limit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"productBottom\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"productForm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"productFormLeft\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Moive title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"title\",\n            onChange: handleChange,\n            placeholder: movie.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Year\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"year\",\n            onChange: handleChange,\n            placeholder: movie.year\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Genre\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"genre\",\n            onChange: handleChange,\n            placeholder: movie.genre\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Limit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"limit\",\n            onChange: handleChange,\n            placeholder: movie.limit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Trailer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: e => setTrailer(e.target.files[0]),\n            name: \"trailer\",\n            placeholder: movie.trailer\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: e => setVideo(e.target.files[0]),\n            name: \"video\",\n            placeholder: movie.video\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"productFormRight\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"productUpload\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: movie.image,\n              alt: \"\",\n              className: \"productUploadImg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"file\",\n              children: /*#__PURE__*/_jsxDEV(Publish, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 27\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              id: \"file\",\n              name: \"image\",\n              onChange: e => setimg(e.target.files[0]),\n              style: {\n                display: \"none\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 19\n          }, this), uploaded >= 4 ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"addProductButton\",\n            onClick: handleSubmit,\n            children: \"update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 11\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"addProductButton\",\n            onClick: handleUpload,\n            children: \"Upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Product, \"EMvRZE6KVZQid97dPQxGf+t7NNY=\", false, function () {\n  return [useLocation];\n});\n\n_c = Product;\n\nvar _c;\n\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"sources":["/home/akhilesh/Desktop/Mern/MwenNetfilixclone/admin/src/pages/product/Product.jsx"],"names":["Link","useLocation","Chart","productData","Publish","MoivesReducer","useContext","useState","storage","MoviesContext","updateMovie","Product","location","dispatch","movies","setMovie","uploaded","setUploaded","trailer","setTrailer","img","setimg","video","setVideo","movie","handleChange","e","value","target","name","console","log","handleSubmit","preventDefault","_id","Upload","items","forEach","item","filename","Date","getTime","label","file","uploadTask","ref","put","on","snapshot","progress","bytesTransferred","totalBytes","err","getDownloadURL","then","url","pre","handleUpload","image","title","genre","year","limit","files","display"],"mappings":"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","sourcesContent":["import { Link, useLocation } from \"react-router-dom\";\nimport \"./product.css\";\nimport Chart from \"../../components/chart/Chart\"\nimport {productData} from \"../../dummyData\"\nimport { Publish } from \"@material-ui/icons\";\nimport MoivesReducer from \"../../context/Moviecontext/MoviesReducer\";\nimport { useContext, useState } from \"react\";\nimport storage from \"../../firebase/firebase\";\nimport { MoviesContext } from \"../../context/Moviecontext/MoviesContext\";\nimport { updateMovie } from \"../../context/Moviecontext/apiCalls\";\n\nexport default function Product() {\n    const location = useLocation()\n      const { dispatch} = useContext(MoviesContext)\n    const [movies, setMovie] = useState(null);\n    const [uploaded, setUploaded] = useState(1);\n      const [trailer, setTrailer] = useState(null);\n      const [img, setimg] = useState(null);\n    \n  const [video, setVideo] = useState(null);\n    const movie = location.movie\n      const handleChange = (e) => {\n    const value = e.target.value;\n    setMovie({ ...movies, [e.target.name]: value });\n      };\n    console.log(movies)\n\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    updateMovie(dispatch,movies,movie._id)\n  };\n     const Upload = (items) => {\n    \n    items.forEach(item => {\n      const filename =  new Date().getTime()+item?.label+item?.file.name\n      const uploadTask = storage.ref(`/items/${filename}`).put(item?.file)\n      uploadTask.on(\"state_changed\", (snapshot) => {\n        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        console.log(\"uploading is \"+progress+\"% done\")\n      }\n        , (err) => console.log(err), () => {\n          uploadTask.snapshot.ref.getDownloadURL().then((url)=> {\n            console.log(url)\n            setMovie((pre) => {\n            return {...pre,[item.label]:url}\n            })\n            setUploaded((pre)=>pre+1)\n        })\n      }\n      \n      )\n    })\n  }\n  const handleUpload = (e) => {\n    e.preventDefault();\n\n    Upload([\n      {\n        file:trailer,label:\"trailer\"\n      },\n      {\n        file:video,label:\"video\"\n      },\n      {\n        file:image,label:\"image\"\n      },\n    ])\n\n  }\n    console.log(video)\n    console.log(trailer)\n  return (\n    <div className=\"product\">\n      <div className=\"productTitleContainer\">\n        <h1 className=\"productTitle\">Movie</h1>\n        <Link to=\"/newproduct\">\n          <button className=\"productAddButton\">Create</button>\n        </Link>\n      </div>\n      <div className=\"productTop\">\n          <div className=\"productTopRight\">\n              <div className=\"productInfoTop\">\n                  <img src={movie.image} className=\"productInfoImg\" />\n                      <span className=\"productName\">{ movie.title}</span>\n              </div>\n              <div className=\"productInfoBottom\">\n                  <div className=\"productInfoItem\">\n                      <span className=\"productInfoKey\">id:</span>\n                      <span className=\"productInfoValue\">{ movie._id}</span>\n                  </div>\n                  <div className=\"productInfoItem\">\n                      <span className=\"productInfoKey\">Genre</span>\n                          <span className=\"productInfoValue\">{ movie.genre}</span>\n                  </div>\n                  <div className=\"productInfoItem\">\n                      <span className=\"productInfoKey\">Year</span>\n                          <span className=\"productInfoValue\">{ movie.year}</span>\n                  </div>\n                  <div className=\"productInfoItem\">\n                      <span className=\"productInfoKey\">limit</span>\n                          <span className=\"productInfoValue\">{movie.limit }</span>\n                  </div>\n              </div>\n          </div>\n      </div>\n      <div className=\"productBottom\">\n          <form className=\"productForm\">\n              <div className=\"productFormLeft\">\n                  <label>Moive title</label>\n                      <input type=\"text\"  name=\"title\"  onChange={handleChange} placeholder={ movie.title}/>\n                  <label>Year</label>\n                      <input type=\"text\"   name=\"year\"  onChange={handleChange} placeholder={ movie.year}/>\n                  <label>Genre</label>\n                      <input type=\"text\"  name=\"genre\" onChange={handleChange} placeholder={ movie.genre}/>\n                  <label>Limit</label>\n                      <input type=\"text\"   name=\"limit\"  onChange={handleChange} placeholder={ movie.limit}/>\n                  <label>Trailer</label>\n                      <input type=\"file\" onChange={e=>setTrailer(e.target.files[0])} name=\"trailer\"  placeholder={ movie.trailer}/>\n                  <label>Video</label>\n                      <input type=\"file\"  onChange={e=> setVideo(e.target.files[0])}  name=\"video\" placeholder={ movie.video}/>\n                  \n              </div>\n              <div className=\"productFormRight\">\n                  <div className=\"productUpload\">\n                          <img src={movie.image}alt=\"\" className=\"productUploadImg\" />\n                      <label for=\"file\">\n                          <Publish/>\n                      </label>\n                      <input type=\"file\" id=\"file\" name=\"image\" onChange={e=>setimg(e.target.files[0])}  style={{display:\"none\"} } />\n                  </div>\n                        {uploaded >=4 ? (\n          <button className=\"addProductButton\" onClick={handleSubmit}>\n          update\n          </button>\n        ) : (\n          <button className=\"addProductButton\" onClick={handleUpload}>\n            Upload\n          </button>\n        )}\n              </div>\n          </form>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}